!function(){"use strict";var e="",t=e+"7c0ea9c25b78e7db700e.png",r=e+"0f00dc14893e3fab8b68.png",n=document.querySelector(".profile__name"),o=document.querySelector(".profile__description"),i=document.querySelector(".profile__image"),u=(document.querySelector(".popup-edit"),document.querySelector(".profile__button")),c=(document.querySelector(".popup__button"),document.querySelector(".form__button"),document.querySelector(".cards")),a=(document.querySelector(".form-add"),document.querySelector(".popup-image"),document.querySelector(".popup__button-image"),document.querySelector(".profile__add")),l=(document.querySelector(".popup-add"),document.querySelector(".popup__close-add"),document.querySelector(".popup"),document.querySelector(".popup-edit-avatar"),document.querySelector(".profile-edit-avt")),s={cardTemplateId:"#card-template",cardsAdd:c,ownerId:"9cdb9bbdd07bc77e32b73ebe"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var d=function(){return e=function e(t){var r=t.card,n=t.cardSelector,o=t.handleCardClick,i=t.popupConfirmationOpen,u=t.handleLike,c=t.userOwner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=r,this._cardSelector=n,this._handleCardClick=o,this._popupConfirmationOpen=i,this._handleLike=u,this._userOwner=c},(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__container").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._card.likes.forEach((function(r){if("9cdb9bbdd07bc77e32b73ebe"===r._id)return e._element.querySelector(".cards__button-like").setAttribute("src",t)})),this._element.querySelector(".cards__image").addEventListener("click",(function(){return e._handleCardClick(e._card.name,e._card.link)})),this._element.querySelector(".cards__like-counter").textContent=this._card.likes.length,this._element.querySelector(".cards__button-like").addEventListener("click",(function(n){var o=e._element.querySelector(".cards__like-counter");return n.target.getAttribute("src")===r?(e._handleLike(e._card,!1).then((function(e){o.textContent=e.likes.length})),n.target.setAttribute("src",t)):(e._handleLike(e._card,!0).then((function(e){o.textContent=e.likes.length})),n.target.setAttribute("src",r))}))}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".cards__container-name").textContent=this._card.name,this._element.querySelector(".cards__image").setAttribute("src",this._card.link),this._element.querySelector(".cards__image").setAttribute("alt",this._card.name),s.ownerId!==this._card.owner._id&&this._element.querySelector(".cards__delete").classList.add("cards__delete-hidden"),this._element.querySelector(".cards__delete").addEventListener("click",(function(t){e._popupConfirmationOpen(e._card._id,t.target.parentElement)})),this._setEventListeners(),this._element}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var h=function(){return e=function e(t,r){var n=t.items,o=t.acao;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._acao=o,this._container=r.cardsAdd,this._config=r},(t=[{key:"setItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._acao(t)}))}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var E=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formSelector=r},t=[{key:"_addErrorMessage",value:function(e){var t=this._input.nextElementSibling;t.textContent=e,t.classList.add(this._config.showErrorMessage),this._input.classList.add(this._config.inputInvalidErrorMessage)}},{key:"_removeErrorMessage",value:function(){var e=this._input.nextElementSibling;e.textContent="",e.classList.remove(this._config.showErrorMessage),this._input.classList.remove(this._config.inputInvalidErrorMessage)}},{key:"_enableButton",value:function(e){var t=e.querySelector(this._config.popupSaveButton);t.classList.remove("form__button-disabled"),t.removeAttribute("disabled")}},{key:"_disableButton",value:function(e){var t=e.querySelector(this._config.popupSaveButton);t.classList.add("form__button-disabled"),t.setAttribute("disabled",!0)}},{key:"_checkIsValid",value:function(e,t){this._input=t;var r=this._input.validity.valid&&!/^\s*$/.test(this._input.value),n=this._input.validationMessage;r?this._removeErrorMessage():(this._addErrorMessage(n),this._disableButton(e)),e.checkValidity()&&this._enableButton(e)}},{key:"_getForm",value:function(){return document.querySelector(this._formSelector)}},{key:"_setEventListeners",value:function(){var e=this;this._disableButton(this._form);var t=this._form.querySelector(this._config.popupSaveButton);t.classList.remove("form__button_disabled"),t.removeAttribute("disabled"),Array.from(this._form.querySelectorAll(this._config.inputElement)).forEach((function(t){return t.addEventListener("input",(function(){return e._checkIsValid(e._form,t)}))}))}},{key:"enableValidation",value:function(){this._form=this._getForm(),this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}],t&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function O(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var j=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)},(t=[{key:"open",value:function(){this._popup.classList.add("popup-opened")}},{key:"close",value:function(){this._popup.classList.remove("popup-opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__button").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){t.target.classList.contains("popup__container")&&e.close()})),document.addEventListener("keydown",(function(t){return e._handleEscClose(t)}))}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function T(e,t,r,n){var o=I(A(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},I.apply(null,arguments)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var B=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t,r){return t=A(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}(this,t,[e]))._popup=document.querySelector(e),o._imageElement=o._popup.querySelector(r),o._titleElement=o._popup.querySelector(n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),r=t,(n=[{key:"open",value:function(e,r){this._imageElement.setAttribute("src",r),this._imageElement.setAttribute("alt",e),this._titleElement.textContent=e,T(t,"open",this,3)([])}},{key:"close",value:function(){T(t,"close",this,3)([])}},{key:"setEventListeners",value:function(){T(t,"setEventListeners",this,3)([])}}])&&C(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(j);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function V(e,t,r,n){var o=N(G(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},N.apply(null,arguments)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}var F=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t,r){return t=G(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,r||[],G(e).constructor):t.apply(e,r))}(this,t,[e]))._popup=document.querySelector(e),o._formElement=o._popup.querySelector(n),o._subimtCallBack=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e),r=t,(n=[{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.querySelectorAll("input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;V(t,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(t){t.preventDefault();var r=e._getInputValues();e._subimtCallBack(r),e._formElement.reset(),e.close()}))}},{key:"close",value:function(){V(t,"close",this,3)([])}}])&&R(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(j);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function $(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}var K=function(){return e=function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n},t=[{key:"getUsers",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers})}},{key:"get",value:function(e){return fetch("".concat(this._baseUrl).concat(e),{method:"GET",headers:this._headers})}},{key:"createCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers})}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"editProfileAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)})}},{key:"editProfile",value:function(e){var t=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})})}}],t&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function X(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var Y=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(r),this._avatarElement=document.querySelector(n)},t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e,t,r){this._nameElement.textContent=e,this._aboutElement.textContent=t,this._avatarElement.src=r}}],t&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function te(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}function re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(re=function(){return!!e})()}function ne(e,t,r,n){var o=oe(ie(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function oe(){return oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},oe.apply(null,arguments)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}var ce=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=ie(t),function(e,t){if(t&&("object"==Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,re()?Reflect.construct(t,r||[],ie(e).constructor):t.apply(e,r))}(this,t,[e]))._popup=document.querySelector(e),n._handleSubmit=r,n._confirmationButton=n._popup.querySelector(".form__button_del-confirm"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),r=t,(n=[{key:"setEventListeners",value:function(){var e=this;ne(t,"setEventListeners",this,3)([]),this._confirmationButton.addEventListener("click",(function(t){t.preventDefault(),e._handleSubmit(e._cardId,e._cardElement),e.close()}))}},{key:"open",value:function(e,r){ne(t,"open",this,3)([]),this._cardId=e,this._cardElement=r}},{key:"close",value:function(){ne(t,"close",this,3)([])}}])&&ee(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(j),ae=new K({baseUrl:"https://around.nomoreparties.co/v1/web-ptbr-cohort-14",headers:{authorization:"d667c682-8c33-4a60-879f-a362c285fdc1","Content-Type":"application/json"}}),le=new Y(".profile__name",".profile__description",".profile__image");ae.getUsers().then((function(e){return e.json()})).then((function(e){le.setUserInfo(e.name,e.about,e.avatar);var t=le.getUserInfo();n.textContent=t.name,o.textContent=t.about,i.src=t.avatar})).catch((function(e){console.log("[GET Users] - Error: ".concat(e))}));var se=new ce(".popup-form-confirm",(function(e,t){return function(e,t){ae.deleteCard(e).then((function(e){return t.remove(),204==e.status?null:Promise.reject(e.status)})).catch((function(t){console.log("[DELETE Card] - Card Id: ".concat(e)),console.log("[DELETE Card] - Error: ".concat(t))}))}(e,t)}));se.setEventListeners();var fe=new F(".popup-edit",(function(e){if(""!=e.name&&""!=e.description){var t=le.getUserInfo();le.setUserInfo(e.name,e.description,t.avatar),ae.editProfile({name:e.name,about:e.description}),fe.close()}}),".form");fe.setEventListeners(),u.addEventListener("click",(function(){fe.open(),be.enableValidation()}));var pe=new F(".popup-add",(function(e){""!=e.title&&""!=e.url&&ae.createCard({name:e.title,link:e.url}).then((function(e){return e.json()})).then((function(e){he(e)}))}),".form-add");pe.setEventListeners();var ye=new F(".popup-edit-avatar",(function(e){var t=le.getUserInfo();le.setUserInfo(t.name,t.about,e.link),ae.editProfileAvatar({avatar:e.link}),ye.close()}),".form_edit-avatar");ye.setEventListeners(),a.addEventListener("click",(function(){pe.open(),me.enableValidation()})),l.addEventListener("click",(function(){ye.open()}));var de,me=new E({formElement:"form",inputElement:"input",showErrorMessage:"form__input-error-message",inputInvalidErrorMessage:"form__input-invalid",popupSaveButton:".form__button",formAddButton:"#create-button"},"#card-form"),be=new E({formElement:"form",inputElement:"input",showErrorMessage:"form__input-error-message",inputInvalidErrorMessage:"form__input-invalid",popupSaveButton:".form__button",formAddButton:"#create-button"},"#user-form"),ve=new B(".popup-image",".popup__image-open",".popup__image-name");function he(e){var t=new d({card:e,cardSelector:s.cardTemplateId,popupConfirmationOpen:function(e,t){return se.open(e,t)},userOwner:void 0,handleCardClick:function(e,t){return ve.open(e,t)},handleLike:function(e,t){return function(e,t){return t?ae.unlikeCard(e._id).then((function(e){return e.json()})).then((function(e){return e})):ae.likeCard(e._id).then((function(e){return e.json()})).then((function(e){return e}))}(e,t)}}).generateCard();de.setItem(t)}ve.setEventListeners(),ae.get("/cards").then((function(e){return e.json()})).then((function(e){(de=new h({items:e,acao:he},s)).renderItems()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQUssU0FBQ2dILEdBQUcsT0FBS0EsRUFBSUMsTUFBTSxJQUN4QmpILE1BQUssU0FBQ3BDLEdBQUksT0FBS0EsQ0FBSSxJQUdmZ0osR0FDSnlDLFNBQVN6TCxFQUFLc0IsS0FDZGMsTUFBSyxTQUFDZ0gsR0FBRyxPQUFLQSxFQUFJQyxNQUFNLElBQ3hCakgsTUFBSyxTQUFDcEMsR0FBSSxPQUFLQSxDQUFJLEdBRTFCLENBV21DMEwsQ0FBYzFMLEVBQU11TCxFQUFRLElBQzFESSxlQUVIVCxHQUFhVSxRQUFRTixFQUN2QixDQWhDQUQsR0FBZWpCLG9CQWtDZnBCLEdBQ0c2QyxJQUFJLFVBQ0p6SixNQUFLLFNBQUNnSCxHQUFHLE9BQUtBLEVBQUlDLE1BQU0sSUFDeEJqSCxNQUFLLFNBQUMwSixJQUNMWixHQUFlLElBQUl0SSxFQUFRLENBQUVDLE1BQU9pSixFQUFPaEosS0FBTWdJLElBQWVuTCxJQUNuRG9NLGFBQ2YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG91cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBjb25zdCBub21lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuXG4vLyBpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25jbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25TYXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XG5leHBvcnQgY29uc3QgY2FyZHNBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWFkZFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uLWltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkNsb3NlQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcbmNvbnN0IG93bmVySWQgPSBcIjljZGI5YmJkZDA3YmM3N2UzMmI3M2ViZVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZWRpdC1hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRlQXZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWVkaXQtYXZ0XCIpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgY2FyZFRlbXBsYXRlSWQ6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgY2FyZHNBZGQsXG4gIG93bmVySWQsXG59O1xuXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIlZhbGUgZGUgWW9zZW1pdGVcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfeW9zZW1pdGUuanBnXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xha2UtbG91aXNlLmpwZ1wiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9iYWxkLW1vdW50YWlucy5qcGdcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9sYXRlbWFyLmpwZ1wiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGEgVmFub2lzZSBcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfdmFub2lzZS5qcGdcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFnby5qcGdcIixcbi8vICAgfSxcbi8vIF07XG4iLCJpbXBvcnQgbGlrZUJ1dHRvbkNsaWNrIGZyb20gXCIuLi9pbWFnZXMvaW1hZ2VfX2xpa2VfY29sb3IucG5nXCI7XG5pbXBvcnQgbGlrZUJ1dHRvbiBmcm9tIFwiLi4vaW1hZ2VzL2ltYWdlX19saWtlLnBuZ1wiO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYXJkLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgcG9wdXBDb25maXJtYXRpb25PcGVuLFxuICAgIGhhbmRsZUxpa2UsXG4gICAgdXNlck93bmVyLFxuICB9KSB7XG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9wb3B1cENvbmZpcm1hdGlvbk9wZW4gPSBwb3B1cENvbmZpcm1hdGlvbk9wZW47XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XG4gICAgdGhpcy5fdXNlck93bmVyID0gdXNlck93bmVyO1xuICB9XG5cbiAgLy8gZnVuw6fDo28gcHJpdmFkYVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fY29udGFpbmVyXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gUGVyY29ycmUgdG9kb3Mgb3MgbGlrZXMgcGFyYSBkZXNjb2JyaXIgc2UgbyB1c3XDoXJpbyBkZXUgbGlrZSBlbSBhbGd1bSBjYXJ0w6NvIGUgY2FzbyBvIHVzdcOhcmlvIHRlbmhhIGRhZG8gbGlrZSwgbyBjYXJ0w6NvIGZpY2EgY29tIG8gY29yYcOnw6NvIHBpbnRhZG9cbiAgICB0aGlzLl9jYXJkLmxpa2VzLmZvckVhY2goKGxpa2UpID0+IHtcbiAgICAgIGlmIChsaWtlLl9pZCA9PT0gXCI5Y2RiOWJiZGQwN2JjNzdlMzJiNzNlYmVcIikge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19idXR0b24tbGlrZVwiKVxuICAgICAgICAgIC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGlrZUJ1dHRvbkNsaWNrKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fY2FyZC5uYW1lLCB0aGlzLl9jYXJkLmxpbmspXG4gICAgICApO1xuXG4gICAgY29uc3QgbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtY291bnRlclwiKTtcbiAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmQubGlrZXMubGVuZ3RoO1xuXG4gICAgLy8gYm90w6NvIGRvIGxpa2VcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fYnV0dG9uLWxpa2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAvLyBwZWdhIGVsZW1lbnRvIGRlIGNvbnRhZG9yIGRlIGxpa2VzXG4gICAgICAgIGNvbnN0IGxpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWNvdW50ZXJcIik7XG4gICAgICAgIGlmIChldnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcInNyY1wiKSA9PT0gbGlrZUJ1dHRvbikge1xuICAgICAgICAgIC8vIHV0aWxpemEgYSBwcm9wcmllZGFkZSBsaWtlcyBkbyBjYXJkIHBhcmEgYWRpY29uYXIgbyBjb250YWRvciBkZSBsaWtlc1xuICAgICAgICAgIC8vIGFjZXNzYXIgbyBjYXJkIC0+IGFjZXNzYXIgbyBhcnJheSBkZSBsaWtlcyAtPiB2ZXJpZmljYXIgbyBjb21wcmltZW50byBkbyBhcnJheSBkZSBsaWtlc1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5fY2FyZCwgZmFsc2UpLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgICAgICAgIC8vIGFkaWNpb25hIGEgcXVhbnRpZGFkZSBkZSBsaWtlcyBhdHVhbGl6YWRhIG5vIGNvbnRhZG9yIGRlIGxpa2VzIGNvbSBiYXNlIG5vIHJldG9ybm8gZGEgYXBpXG4gICAgICAgICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGNhcmQubGlrZXMubGVuZ3RoO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBldnQudGFyZ2V0LnNldEF0dHJpYnV0ZShcInNyY1wiLCBsaWtlQnV0dG9uQ2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXRpbGl6YSBhIHByb3ByaWVkYWRlIGxpa2VzIGRvIGNhcmQgcGFyYSBhZGljb25hciBvIGNvbnRhZG9yIGRlIGxpa2VzXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2UodGhpcy5fY2FyZCwgdHJ1ZSkudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICAgIC8vIGFkaWNpb25hIGEgcXVhbnRpZGFkZSBkZSBsaWtlcyBhdHVhbGl6YWRhIG5vIGNvbnRhZG9yIGRlIGxpa2VzIGNvbSBiYXNlIG5vIHJldG9ybm8gZGEgYXBpXG4gICAgICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBldnQudGFyZ2V0LnNldEF0dHJpYnV0ZShcInNyY1wiLCBsaWtlQnV0dG9uKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIC8vIGNhcmRzX19jb250YWluZXIgY2xvbmFkb1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19jb250YWluZXItbmFtZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9jYXJkLm5hbWU7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpXG4gICAgICAuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2NhcmQubGluayk7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpXG4gICAgICAuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX2NhcmQubmFtZSk7XG5cbiAgICBpZiAoY29uZmlnLm93bmVySWQgIT09IHRoaXMuX2NhcmQub3duZXIuX2lkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19kZWxldGVcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkc19fZGVsZXRlLWhpZGRlblwiKTtcbiAgICB9XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2RlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX3BvcHVwQ29uZmlybWF0aW9uT3Blbih0aGlzLl9jYXJkLl9pZCwgZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50KTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIGFjYW8gfSwgY29uZmlnKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtczsgLy9jYXJkcyBhcnJheVxuICAgIHRoaXMuX2FjYW8gPSBhY2FvOyAvLyBmdW7Dp8Ojb1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbmZpZy5jYXJkc0FkZDtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBzZXRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHRoaXMuX2FjYW8oY2FyZCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1TZWxlY3Rvcikge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XG4gIH1cbiAgX2FkZEVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5faW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5zaG93RXJyb3JNZXNzYWdlKTtcbiAgICB0aGlzLl9pbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEludmFsaWRFcnJvck1lc3NhZ2UpO1xuICB9XG5cbiAgX3JlbW92ZUVycm9yTWVzc2FnZSgpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5faW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuc2hvd0Vycm9yTWVzc2FnZSk7XG4gICAgdGhpcy5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRJbnZhbGlkRXJyb3JNZXNzYWdlKTtcbiAgfVxuICAvLyBoYWJpbGl0YXIgbyBib3Rhb1xuICBfZW5hYmxlQnV0dG9uKGZvcm0pIHtcbiAgICBjb25zdCBidXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBvcHVwU2F2ZUJ1dHRvbik7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19idXR0b24tZGlzYWJsZWRcIik7XG4gICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICB9XG4gIC8vIGRpc2FiaWxpZGFyIG8gYm90YW9cbiAgX2Rpc2FibGVCdXR0b24oZm9ybSkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucG9wdXBTYXZlQnV0dG9uKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImZvcm1fX2J1dHRvbi1kaXNhYmxlZFwiKTtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gIH1cblxuICBfY2hlY2tJc1ZhbGlkKGZvcm0sIGlucHV0KSB7XG4gICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcbiAgICBjb25zdCBpc1ZhbGlkID1cbiAgICAgIHRoaXMuX2lucHV0LnZhbGlkaXR5LnZhbGlkICYmICEvXlxccyokLy50ZXN0KHRoaXMuX2lucHV0LnZhbHVlKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9pbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcblxuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgdGhpcy5fYWRkRXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSk7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKGZvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW1vdmVFcnJvck1lc3NhZ2UoKTtcbiAgICB9XG4gICAgaWYgKGZvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oZm9ybSk7XG4gICAgfVxuICB9XG5cbiAgX2dldEZvcm0oKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcbiAgICByZXR1cm4gZm9ybTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKHRoaXMuX2Zvcm0pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcucG9wdXBTYXZlQnV0dG9uKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiKTtcbiAgICBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRFbGVtZW50KVxuICAgICk7XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PlxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+XG4gICAgICAgIHRoaXMuX2NoZWNrSXNWYWxpZCh0aGlzLl9mb3JtLCBpbnB1dClcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fZ2V0Rm9ybSgpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtb3BlbmVkXCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLW9wZW5lZFwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IHBvcHVwQnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XG4gICAgcG9wdXBCdXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY29udGFpbmVyXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQpID0+IHRoaXMuX2hhbmRsZUVzY0Nsb3NlKGV2dCkpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGltYWdlU2VsZWN0b3IsIHRpdGxlU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihpbWFnZVNlbGVjdG9yKTtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xuICB9XG5cbiAgb3Blbih0aXRsZSwgaW1hZ2UpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIGltYWdlKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRpdGxlKTtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxCYWNrLCBmb3JtU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5fc3ViaW10Q2FsbEJhY2sgPSBzdWJtaXRDYWxsQmFjaztcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKSk7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG5cbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5fc3ViaW10Q2FsbEJhY2sodmFsdWVzKTtcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgZ2V0VXNlcnMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldChwYXRoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtwYXRofWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpbWFnZUlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aW1hZ2VJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgZWRpdFByb2ZpbGVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhciksXG4gICAgfSk7XG4gIH1cblxuICBlZGl0UHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCwgYXZhdGFyKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fY29uZmlybWF0aW9uQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZm9ybV9fYnV0dG9uX2RlbC1jb25maXJtXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9jYXJkSWQsIHRoaXMuX2NhcmRFbGVtZW50KTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG91cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIGVkaXRidXR0b24sXG4gIGJ1dHRvbkFkZCxcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdGVBdnQsXG4gIG5vbWUsXG4gIGRlc2NyaXB0aW9uLFxuICBhdmF0YXIsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxzLmpzXCI7XG5cbi8vIGNyaWFyIGluc3RhbmNpYXMgZGUgQXBpXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1wdGJyLWNvaG9ydC0xNFwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJkNjY3YzY4Mi04YzMzLTRhNjAtODc5Zi1hMzYyYzI4NWZkYzFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgXCIucHJvZmlsZV9fbmFtZVwiLFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBcIi5wcm9maWxlX19pbWFnZVwiXG4pO1xuXG4vLyBCdXNjYXIgVXN1YXJpb1xubGV0IHVzZXJPd25lcjtcbmFwaVxuICAuZ2V0VXNlcnMoKVxuICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAudGhlbigodXNlcnMpID0+IHtcbiAgICAvLyB1c2VyT3duZXIgPSB1c2VycztcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2Vycy5uYW1lLCB1c2Vycy5hYm91dCwgdXNlcnMuYXZhdGFyKTtcbiAgICBjb25zdCB1c2VyT2JqID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICAgIG5vbWUudGV4dENvbnRlbnQgPSB1c2VyT2JqLm5hbWU7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB1c2VyT2JqLmFib3V0O1xuICAgIGF2YXRhci5zcmMgPSB1c2VyT2JqLmF2YXRhcjtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBbR0VUIFVzZXJzXSAtIEVycm9yOiAke2Vycm9yfWApO1xuICB9KTtcblxuY29uc3QgcG9wdXBXaXRoQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIucG9wdXAtZm9ybS1jb25maXJtXCIsXG4gIChjYXJkSWQsIGNhcmRFbGVtZW50KSA9PiBkZWxldGVDYXJkKGNhcmRJZCwgY2FyZEVsZW1lbnQpXG4pO1xuXG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gYWRpY2lvbmFuZG8gbm9tZSBlIG11ZGFuZG8gaW5mb3JtYcOnw7Vlc1xuZnVuY3Rpb24gYWRkTmFtZXModmFsdWVzKSB7XG4gIGlmICh2YWx1ZXMubmFtZSAhPSBcIlwiICYmIHZhbHVlcy5kZXNjcmlwdGlvbiAhPSBcIlwiKSB7XG4gICAgY29uc3QgdXNlck9iaiA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odmFsdWVzLm5hbWUsIHZhbHVlcy5kZXNjcmlwdGlvbiwgdXNlck9iai5hdmF0YXIpO1xuXG4gICAgLy8gY2hhbWFyIGEgYXBpIGRlIGVkacOnw6NvIGRlIHBlcmZpbFxuICAgIGFwaS5lZGl0UHJvZmlsZSh7IG5hbWU6IHZhbHVlcy5uYW1lLCBhYm91dDogdmFsdWVzLmRlc2NyaXB0aW9uIH0pO1xuXG4gICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICB9XG59XG5cbi8vIEluc3RhbmNpYSBvIFBvcHVwV2l0aEZvcm0gcGFyYSBlZGnDp8OjbyBkZSBwZXJmaWxcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cC1lZGl0XCIsIGFkZE5hbWVzLCBcIi5mb3JtXCIpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBldmVudG8gcGFyYSBhYnJpciBwb3B1cCBkZSBlZGl0YXIgcGVyZmlsXG5lZGl0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICB1c2VyRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuLy8gaW5zdGFuY2lhIHBhcmEgYWJyaXIgcG9wdXAgZGUgYWRpY2lvbmFyIGNhcnTDo29cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWFkZFwiLCBhZGRJbWFnZSwgXCIuZm9ybS1hZGRcIik7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gYWRpY2lvbmFuZG8gbm9tZSBlIGltYWdlbSBhbyBjYXJ0w6NvXG5mdW5jdGlvbiBhZGRJbWFnZSh2YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy50aXRsZSAhPSBcIlwiICYmIHZhbHVlcy51cmwgIT0gXCJcIikge1xuICAgIGFwaVxuICAgICAgLmNyZWF0ZUNhcmQoe1xuICAgICAgICBuYW1lOiB2YWx1ZXMudGl0bGUsXG4gICAgICAgIGxpbms6IHZhbHVlcy51cmwsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhjYXJkKTtcblxuICAgICAgICByZW5kZXJDYXJkcyhjYXJkKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cC1lZGl0LWF2YXRhclwiLFxuICBhZGRQaG90b1Byb2ZpbGUsXG4gIFwiLmZvcm1fZWRpdC1hdmF0YXJcIlxuKTtcbi8vIGFkaWNpb25hbmRvIHVtYSBmb3RvIGRlIHBlcmZpbCBub3ZhXG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmZ1bmN0aW9uIGFkZFBob3RvUHJvZmlsZSh2YWx1ZSkge1xuICBjb25zdCB1c2VyT2JqID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlck9iai5uYW1lLCB1c2VyT2JqLmFib3V0LCB2YWx1ZS5saW5rKTtcblxuICBhcGkuZWRpdFByb2ZpbGVBdmF0YXIoe1xuICAgIGF2YXRhcjogdmFsdWUubGluayxcbiAgfSk7XG4gIHBvcHVwRWRpdEF2YXRhci5jbG9zZSgpO1xufVxuXG4vLyAgYWJyaXIgbyBwb3B1cCBwYXJhIGFkaWNpb25hciBpbWFnZW5zXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcbiAgY2FyZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7XG5cbi8vIGV2ZW50byBwYXJhIGFicmlyIHBvcHVwIGRlIGVkaXRhciBmb3RvIGRlIHBlcmZpbFxucHJvZmlsZUVkaXRlQXZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG59KTtcblxuLy8gICAgICAgICAgICAgICAgICAgdmFsaWRhIG9zIGZvcm11bGFyaW9zXG5cbmNvbnN0IGNhcmRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHtcbiAgICBmb3JtRWxlbWVudDogXCJmb3JtXCIsXG4gICAgaW5wdXRFbGVtZW50OiBcImlucHV0XCIsXG4gICAgc2hvd0Vycm9yTWVzc2FnZTogXCJmb3JtX19pbnB1dC1lcnJvci1tZXNzYWdlXCIsXG4gICAgaW5wdXRJbnZhbGlkRXJyb3JNZXNzYWdlOiBcImZvcm1fX2lucHV0LWludmFsaWRcIixcbiAgICBwb3B1cFNhdmVCdXR0b246IFwiLmZvcm1fX2J1dHRvblwiLFxuICAgIGZvcm1BZGRCdXR0b246IFwiI2NyZWF0ZS1idXR0b25cIixcbiAgfSxcbiAgXCIjY2FyZC1mb3JtXCJcbik7XG5cbmNvbnN0IHVzZXJGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHtcbiAgICBmb3JtRWxlbWVudDogXCJmb3JtXCIsXG4gICAgaW5wdXRFbGVtZW50OiBcImlucHV0XCIsXG4gICAgc2hvd0Vycm9yTWVzc2FnZTogXCJmb3JtX19pbnB1dC1lcnJvci1tZXNzYWdlXCIsXG4gICAgaW5wdXRJbnZhbGlkRXJyb3JNZXNzYWdlOiBcImZvcm1fX2lucHV0LWludmFsaWRcIixcbiAgICBwb3B1cFNhdmVCdXR0b246IFwiLmZvcm1fX2J1dHRvblwiLFxuICAgIGZvcm1BZGRCdXR0b246IFwiI2NyZWF0ZS1idXR0b25cIixcbiAgfSxcbiAgXCIjdXNlci1mb3JtXCJcbik7XG5cbi8vIEluc3RhbmNpYSBvIFBvcHVwV2l0aEltYWdlXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgXCIucG9wdXAtaW1hZ2VcIixcbiAgXCIucG9wdXBfX2ltYWdlLW9wZW5cIixcbiAgXCIucG9wdXBfX2ltYWdlLW5hbWVcIlxuKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEZ1bsOnw6NvIHBhcmEgYWRpY2lvbmFyIGUgcmVtb3ZlciBsaWtlXG5mdW5jdGlvbiBoYW5kbGVBcGlMaWtlKGNhcmQsIGlzTGlrZWQpIHtcbiAgLy8gU2UgaXNMaWtlZCBmb3IgdHJ1ZSBhIGZ1bsOnw6NvIGTDoSBkZXNsaWtlIG5vIGNhcmRcbiAgaWYgKGlzTGlrZWQpIHtcbiAgICByZXR1cm4gYXBpXG4gICAgICAudW5saWtlQ2FyZChjYXJkLl9pZClcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigoY2FyZCkgPT4gY2FyZCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gU2UgaXNMaWtlZCBmb3IgZmFsc2UgYSBmdW7Dp8OjbyBkw6EgbGlrZSBubyBjYXJkXG4gICAgcmV0dXJuIGFwaVxuICAgICAgLmxpa2VDYXJkKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChjYXJkKSA9PiBjYXJkKTtcbiAgfVxufVxuXG4vLyBDcmlhIGUgYWRpY2lvbmEgdW0gbm92byBjYXJkIG5hIHDDoWdpbmFcbmZ1bmN0aW9uIHJlbmRlckNhcmRzKGNhcmQpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHtcbiAgICBjYXJkLFxuICAgIGNhcmRTZWxlY3RvcjogY29uZmlnLmNhcmRUZW1wbGF0ZUlkLFxuICAgIHBvcHVwQ29uZmlybWF0aW9uT3BlbjogKGNhcmRJZCwgY2FyZEVsZW1lbnQpID0+XG4gICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ub3BlbihjYXJkSWQsIGNhcmRFbGVtZW50KSxcbiAgICB1c2VyT3duZXIsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAodGl0bGUsIGltYWdlKSA9PiBwb3B1cFdpdGhJbWFnZS5vcGVuKHRpdGxlLCBpbWFnZSksXG4gICAgaGFuZGxlTGlrZTogKGNhcmQsIGlzTGlrZWQpID0+IGhhbmRsZUFwaUxpa2UoY2FyZCwgaXNMaWtlZCksXG4gIH0pLmdlbmVyYXRlQ2FyZCgpO1xuXG4gIHNlY3Rpb25DYXJkcy5zZXRJdGVtKG5ld0NhcmQpO1xufVxubGV0IHNlY3Rpb25DYXJkcztcbmFwaVxuICAuZ2V0KFwiL2NhcmRzXCIpXG4gIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIHNlY3Rpb25DYXJkcyA9IG5ldyBTZWN0aW9uKHsgaXRlbXM6IGNhcmRzLCBhY2FvOiByZW5kZXJDYXJkcyB9LCBjb25maWcpO1xuICAgIHNlY3Rpb25DYXJkcy5yZW5kZXJJdGVtcygpO1xuICB9KTtcblxuLy8gZGVsZXRlQ2FyZFxuZnVuY3Rpb24gZGVsZXRlQ2FyZChpZCwgY2FyZEVsZW1lbnQpIHtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoaWQpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgW0RFTEVURSBDYXJkXSAtIENhcmQgSWQ6ICR7aWR9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgW0RFTEVURSBDYXJkXSAtIEVycm9yOiAke2Vycm9yfWApO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJub21lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJlZGl0YnV0dG9uIiwiY2FyZHNBZGQiLCJidXR0b25BZGQiLCJwcm9maWxlRWRpdGVBdnQiLCJjb25maWciLCJjYXJkVGVtcGxhdGVJZCIsIm93bmVySWQiLCJDYXJkIiwiX3JlZiIsImNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJwb3B1cENvbmZpcm1hdGlvbk9wZW4iLCJoYW5kbGVMaWtlIiwidXNlck93bmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9jYXJkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfcG9wdXBDb25maXJtYXRpb25PcGVuIiwiX2hhbmRsZUxpa2UiLCJfdXNlck93bmVyIiwia2V5IiwidmFsdWUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RoaXMiLCJsaWtlcyIsImZvckVhY2giLCJsaWtlIiwiX2lkIiwiX2VsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsaWtlQnV0dG9uQ2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwibmFtZSIsImxpbmsiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImV2dCIsImxpa2VDb3VudGVyIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwibGlrZUJ1dHRvbiIsInRoZW4iLCJfdGhpczIiLCJfZ2V0VGVtcGxhdGUiLCJvd25lciIsImNsYXNzTGlzdCIsImFkZCIsInBhcmVudEVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiaXRlbXMiLCJhY2FvIiwiX2l0ZW1zIiwiX2FjYW8iLCJfY29udGFpbmVyIiwiX2NvbmZpZyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiRm9ybVZhbGlkYXRvciIsImZvcm1TZWxlY3RvciIsIl9mb3JtU2VsZWN0b3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiX2lucHV0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic2hvd0Vycm9yTWVzc2FnZSIsImlucHV0SW52YWxpZEVycm9yTWVzc2FnZSIsInJlbW92ZSIsImZvcm0iLCJidXR0b24iLCJwb3B1cFNhdmVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dCIsImlzVmFsaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidGVzdCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3JlbW92ZUVycm9yTWVzc2FnZSIsIl9hZGRFcnJvck1lc3NhZ2UiLCJfZGlzYWJsZUJ1dHRvbiIsImNoZWNrVmFsaWRpdHkiLCJfZW5hYmxlQnV0dG9uIiwiX2Zvcm0iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSXNWYWxpZCIsIl9nZXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiY2xvc2UiLCJjb250YWlucyIsIl9oYW5kbGVFc2NDbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiaW1hZ2VTZWxlY3RvciIsInRpdGxlU2VsZWN0b3IiLCJfY2FsbFN1cGVyIiwiX2ltYWdlRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfaW5oZXJpdHMiLCJ0aXRsZSIsImltYWdlIiwiX3N1cGVyUHJvcEdldCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRDYWxsQmFjayIsIl9mb3JtRWxlbWVudCIsIl9zdWJpbXRDYWxsQmFjayIsImlucHV0cyIsInZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZmV0Y2giLCJjb25jYXQiLCJtZXRob2QiLCJwYXRoIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaW1hZ2VJZCIsImNhcmRJZCIsIl9yZWYyIiwiYWJvdXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsInNyYyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJfY29uZmlybWF0aW9uQnV0dG9uIiwiX2NhcmRJZCIsIl9jYXJkRWxlbWVudCIsImNhcmRFbGVtZW50IiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiZ2V0VXNlcnMiLCJyZXMiLCJqc29uIiwidXNlcnMiLCJzZXRVc2VySW5mbyIsInVzZXJPYmoiLCJnZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaWQiLCJkZWxldGVDYXJkIiwic3RhdHVzIiwiUHJvbWlzZSIsInJlamVjdCIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0UHJvZmlsZSIsImVkaXRQcm9maWxlIiwib3BlbiIsInVzZXJGb3JtIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQWRkQ2FyZCIsInVybCIsImNyZWF0ZUNhcmQiLCJyZXNwb25zZSIsInJlbmRlckNhcmRzIiwicG9wdXBFZGl0QXZhdGFyIiwiZWRpdFByb2ZpbGVBdmF0YXIiLCJjYXJkRm9ybSIsInNlY3Rpb25DYXJkcyIsImZvcm1FbGVtZW50IiwiZm9ybUFkZEJ1dHRvbiIsInBvcHVwV2l0aEltYWdlIiwibmV3Q2FyZCIsImlzTGlrZWQiLCJ1bmxpa2VDYXJkIiwibGlrZUNhcmQiLCJoYW5kbGVBcGlMaWtlIiwiZ2VuZXJhdGVDYXJkIiwic2V0SXRlbSIsImdldCIsImNhcmRzIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9